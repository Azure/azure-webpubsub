"use strict";(self.webpackChunkgithub_pages=self.webpackChunkgithub_pages||[]).push([[3565],{4505:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/typical-architecture-managed-socketio-467d864b66a7a799cc57abd245587796.jpg"},5680:(e,t,r)=>{r.d(t,{xA:()=>u,yg:()=>d});var n=r(6540);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(r),h=o,d=p["".concat(l,".").concat(h)]||p[h]||g[h]||a;return r?n.createElement(d,i(i({ref:t},u),{},{components:r})):n.createElement(d,i({ref:t},u))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},6913:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>g,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var n=r(8168),o=(r(6540),r(5680));const a={slug:"azure-web-pubsub-for-socketio-generally-available",title:"Azure Web PubSub for Socket.IO is now generally available",authors:["KevinG"],custom_edit_url:null},i=void 0,s={permalink:"/azure-webpubsub/blog/azure-web-pubsub-for-socketio-generally-available",source:"@site/blog/2023-11-20-web-pubsub-for-socket.io-ga/index.md",title:"Azure Web PubSub for Socket.IO is now generally available",description:"TL;DR",date:"2023-11-20T00:00:00.000Z",formattedDate:"November 20, 2023",tags:[],readingTime:3.52,hasTruncateMarker:!1,authors:[{name:"Kevin Guo",title:"Senior Product Manager",url:"https://github.com/kevinguo-ed",imageURL:"https://avatars.githubusercontent.com/u/105208143?s=400&u=9fed0cb6d3e64908d9b6b7ae9e12dcb96a0e3882&v=4",key:"KevinG"}],frontMatter:{slug:"azure-web-pubsub-for-socketio-generally-available",title:"Azure Web PubSub for Socket.IO is now generally available",authors:["KevinG"],custom_edit_url:null},nextItem:{title:"What is WebSocket? (part 2/2)",permalink:"/azure-webpubsub/blog/what_is_websocket_part2"}},l={authorsImageUrls:[void 0]},c=[{value:"<strong>TL;DR</strong>",id:"tldr",level:2},{value:"<strong>Solve scalability issue without code rewrite</strong>",id:"solve-scalability-issue-without-code-rewrite",level:2},{value:"<strong>Introduce additional benefits to enterprise-level applications</strong>",id:"introduce-additional-benefits-to-enterprise-level-applications",level:2},{value:"<strong>An example showing how easy it is to migrate a Socket.IO app to Azure</strong>",id:"an-example-showing-how-easy-it-is-to-migrate-a-socketio-app-to-azure",level:2},{value:"<strong>Server-side code</strong>",id:"server-side-code",level:3},{value:"<strong>Client-side code</strong>",id:"client-side-code",level:3},{value:"<strong>How does it work?</strong>",id:"how-does-it-work",level:2},{value:"<strong>Now generally available.</strong>",id:"now-generally-available",level:2},{value:"<strong>Resources and references</strong>",id:"resources-and-references",level:2}],u={toc:c},p="wrapper";function g({components:e,...t}){return(0,o.yg)(p,(0,n.A)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("main",null,(0,o.yg)("h2",{id:"tldr"},(0,o.yg)("strong",{parentName:"h2"},"TL;DR")),(0,o.yg)("p",null,"Socket.IO library is natively supported on Azure. "),(0,o.yg)("p",null,"Since we public previewed this feature, we received positive feedback from users. Now we are happy to share that Web PubSub for Socket.IO is generally available, which means that Azure customers can expect stable APIs, SLAs customer support and it\u2019s suitable for use in production."),(0,o.yg)("p",null,(0,o.yg)("a",{parentName:"p",href:"https://learn.microsoft.com/azure/azure-web-pubsub/socketio-quickstart"},"\ud83d\udd17 Follow this quickstarts guide to try out the feature.")),(0,o.yg)("p",null,(0,o.yg)("a",{parentName:"p",href:"https://github.com/Azure-Samples/socket.io-webapp-integration"},"\ud83d\udd17 Check out the repo of a collaborative whiteboard app that showcases the use of Socket.IO APIs and how Azure handles scalability challenges.")," "),(0,o.yg)("h2",{id:"solve-scalability-issue-without-code-rewrite"},(0,o.yg)("strong",{parentName:"h2"},"Solve scalability issue without code rewrite")),(0,o.yg)("p",null,"When we interviewed Socket.IO users, the challenge of scaling out Socket.IO servers came up repeatedly. It\u2019s a challenge that can be met uniquely by Azure. With the input from Socket.IO users, it\u2019s a challenge we aimed to solve when we public previewed the support for Socket.IO on Azure two months ago. "),(0,o.yg)("p",null,"Developers can continue using the Socket.IO APIs they know and love and migrate to Azure seamless without code rewrite. The following shows what\u2019s needed in the server-side and the client-side code to get a Socket.IO app running on Azure and instantly reap the benefits of Azure\u2019s massive scale (million+ concurrent users)."),(0,o.yg)("h2",{id:"introduce-additional-benefits-to-enterprise-level-applications"},(0,o.yg)("strong",{parentName:"h2"},"Introduce additional benefits to enterprise-level applications")),(0,o.yg)("p",null,"Web PubSub for Socket.IO aims to address the scalability challenge Socket.IO developers face. Additionally, it offers enterprise-focused features. "),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Cross-region replication to make your application more resilient by running in independent Azure regions"),(0,o.yg)("li",{parentName:"ul"},"Custom domain to add an extra layer of security "),(0,o.yg)("li",{parentName:"ul"},"Auto-scaling to dynamically scale up and down based on usage")),(0,o.yg)("h2",{id:"an-example-showing-how-easy-it-is-to-migrate-a-socketio-app-to-azure"},(0,o.yg)("strong",{parentName:"h2"},"An example showing how easy it is to migrate a Socket.IO app to Azure")),(0,o.yg)("h3",{id:"server-side-code"},(0,o.yg)("strong",{parentName:"h3"},"Server-side code")),(0,o.yg)("p",null,"Developers only need to call ",(0,o.yg)("inlineCode",{parentName:"p"},"useAzureSocketIO()")," to set up the communication between this server and the cloud service. To Socket.IO users, the rest of the code should familiar as they are the APIs of Socket.IO library. These lines are included here for completeness of a working program. "),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js",metastring:'title="server.js"',title:'"server.js"'},'const { Server } = require("socket.io");\n// highlight-next-line\nconst { useAzureSocketIO } = require("@azure/web-pubsub-socket.io");\n\nlet io = new Server(3000);\n\n// highlight-start\n// Use the following line to integrate with Web PubSub for Socket.IO\nuseAzureSocketIO(io, {\n    hub: "Hub", // The hub name can be any valid string.\n    connectionString: "<connection-string>"\n});\n// highlight-end\n\nio.on("connection", (socket) => {\n    // Sends a message to the client\n    socket.emit("hello", "world");\n\n    // Receives a message from the client\n    socket.on("howdy", (arg) => {\n        console.log(arg);   // Prints "stranger"\n    })\n')),(0,o.yg)("h3",{id:"client-side-code"},(0,o.yg)("strong",{parentName:"h3"},"Client-side code")),(0,o.yg)("p",null,"The change to the client-side code is also minimal. Notice that we are using ",(0,o.yg)("inlineCode",{parentName:"p"},"socket.io-client")," package and when initializing socket object, we set it up so that the Socket.IO client connects with the cloud service. The rest of the code is included for completeness of a working program."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js",metastring:'title="client.js"',title:'"client.js"'},'// highlight-next-line\nconst io = require("socket.io-client");\n\n// highlight-start\nconst socket = io("<web-pubsub-socketio-endpoint>", {\n    path: "/clients/socketio/hubs/Hub",\n});\n// highlight-end\n\n// Receives a message from the server\nsocket.on("hello", (arg) => {\n    console.log(arg);\n});\n\n// Sends a message to the server\nsocket.emit("howdy", "stranger")\n\n')),(0,o.yg)("h2",{id:"how-does-it-work"},(0,o.yg)("strong",{parentName:"h2"},"How does it work?")),(0,o.yg)("p",null,"As you can see from the code snippets, both the Socket.IO client and Socket.IO server establish a connection with a cloud service. The benefit of having a cloud service to facilitate the communication between the two is that it reduces the load on your Socket.IO server and removes to the need to worry about what if \u201cI need to send messages to 1000+ clients\u201d. All that\u2019s required is the same `socket.emit()`` call. The cloud service, which maintains persistent connections with your Socket.IO clients, fans out the message to all the clients. Graphically, it looks like this."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"Architecture of Socket.IO managed by Azure",src:r(4505).A,width:"1152",height:"648"})),(0,o.yg)("p",null,"You can read more about how it works behind the scenes ",(0,o.yg)("a",{parentName:"p",href:"https://learn.microsoft.com/azure/azure-web-pubsub/socketio-service-internal"},"\ud83d\udd17 by reading the article"),"."),(0,o.yg)("h2",{id:"now-generally-available"},(0,o.yg)("strong",{parentName:"h2"},"Now generally available.")),(0,o.yg)("p",null,"Since public preview, we received positive feedback from developers and now we are happy to share that this feature is generally available and suitable for use in production. Besides stable APIs and SLA guarantees, developers can have full support through Azure\u2019s ticket system."),(0,o.yg)("h2",{id:"resources-and-references"},(0,o.yg)("strong",{parentName:"h2"},"Resources and references")),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://socket.io/"},"\ud83d\udd17 Socket.IO library documentation")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/azure/azure-web-pubsub/socketio-quickstart"},"\ud83d\udd17 Quickstarts to migrate an existing Socket.IO app on Azure")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/azure/azure-web-pubsub/socketio-service-internal"},"\ud83d\udd17 Internal: how does Azure solve the scalability challenge for Socket.IO developers")))))}g.isMDXComponent=!0}}]);