---
layout: docs
title: Overview
group: concepts
toc: true
---

## Overview

Azure Web PubSub Service provides an easy way to publish/subscribe messages using simple [WebSocket](https://en.wikipedia.org/wiki/WebSocket) connections.
1. Simple to write a client using any language having WebSocket support
1. Both text and binary messags are supported within one connection
1. The service manages the WebSocket connections for you 
1. Provide an easy way for you to handle events such as client `connect`, `disconnect` and `send` messages.
1. Empowers you to manage the connections, such as close the connection, send to the connection, etc.

## Terms

1. Client Connection and ConnectionId
A client connects to the `/client` endpoint, when connected, an unique `connectionId` is generated by the service to the client as the unique identity of the client connection. Details are described in [Client Protocol](#client_protocol) section.

1. Client Events
Events are created during the lifecycle of a client connection. For example, a simple WebSocket client connection creates a `connect` event when it tries to connect to the service, a `send` event when it tries the send messages to the service, and a `disconnect` event when it disconnects from the service. Details about *events* are illustrated in [Client Events](#client_events) section.

1. Server
Server is where hosts the application logic. It has the ability to handle client events, to manage client connections, to join groups, and to publish messages to groups. Servers can connect to the service through `/server` endpoint using a WebSocket connection (Proactive mode), or can be a web app acts as an Upstream of the service and is invoked by the service (Passive/Webhook mode) when demanded. Details about **server** are described in [Server Protocol](#server_protocol) section.


## Simple Start

## Client

Client workflow,
Client connected to service, trigger event `connect`

Connect can decide:
1. Whether or not the client is authorized
2. What `role` a client belongs to
3. 

<a id="client_events" ></a>

## Client Events

### Client Protocol

### Simple WebSocket Client

Anonymous connect:

```js

// When creating the connection, a `connect` event is generated
var client = new WebSocket("wss://xxx.webpubsub.azure.com/client");

client.onopen = e => {
    // When sending a message, a `message` event is generated    
    client.send("hello");
}

```

Authorized connect:


### WebSocket Client with `json.webpubsub.azure` subprotocol

Subscriber:

```js
var subscriber = new WebSocket("wss://xxx.webpubsub.azure.com/client", "json.webpubsub.azure");
subscriber.onmessage = e => {
    if (e.data) {
        console.log(e.data);
    }
}
```

Publisher:

```js
var publisher = new WebSocket("wss://xxx.webpubsub.azure.com/client", "json.webpubsub.azure");
publisher.onopen = e => {
    publisher.send({
        event: "publish",
        payload: "hello"
    });
}

```

### WebSocket Client with `protobuf.webpubsub.azure` subprotocol


## Client Protocol


## Server Protocol

```js

var server = new WebPubSubServer("{ConnectionString}", "publisher+subscriber+manager");
server.subscribe("group", () => {
    // callback
});
server.publish("group", "data");

server.handleEvents("connect", () => {

});
server.handleEvents("disconnect", () => {

})
server.handleEvents("publish", () => {
   // callback
}, () => {
    // filter
});

server.handleEvents("subscribe", () => {
    // callback
}, () => {
    // filter
});


var client = server.client("connectionId");
client.close();
client.send();
server.client("connectionId").close();
server.manager.sendToConnection("");


```

## Scenarios

### Client-Server Architecture

### Server-Server Pub-Sub

### Client-Client (P2P) Pub-Sub


## Events

## Authorization
### Roles
Role-Based Access Control (RBAC)

Roles:

subscriber to some group;
publish to some group;
publish to all clients;




